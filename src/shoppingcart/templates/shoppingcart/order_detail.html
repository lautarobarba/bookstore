{% extends 'base.html' %}
{% load django_template_maths %}
{% block title %}Compra{% endblock title %}

{% block content %}
    {% if user.id == owner or user.profile.group.name == 'admin' %}
        <h1 class="text-center">Factura N° {{ order.id }}</h1>
        <h2>Fecha: {{ order.date }}</h1>
        <h2>Cliente: {{ order.client.profile }}</h1>
        <table class="table ">
        <thead class = "thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Libro</th>
                <th scope="col">Precio</th>
                <th scope="col">Cantidad</th> 
                <th scope="col">Total</th>      
            </tr>
        </thead>
        <tbody>
            {% for renglon in productos %}       
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td><a href="{{ renglon.book.get_absolute_url }}">{{ renglon.book }}</a></td>
                    <td>{{ renglon.book.price }}</td>
                    <td>{{ renglon.quantity }}</td>
                    <td>$ {{ renglon.get_value }}</td>
                </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
            <th class="text-align-right" id="total" colspan="4">Total :</th>
            <td>$ {{ total }}</td>
            </tr>
        </tfoot>
        </table>

        <!-- Comprar -->
        {% if object_list %}
            <div class="row justify-content-center">
                <a href="{% url 'home' %}" class="btn btn-primary btn-lg" role="button">Volver al Inicio</a>
            </div>
        {% endif %}

    {% else %}
        <p> Debes ser dueño del carrito o administrador para poder ver la factura.</p>
        <a href= "{% url 'home' %}">Inicio</a>
    {% endif %}
{% endblock content %}